diff --git a/src/filebuf.h b/src/filebuf.h
index 9d53bc307..d4a689b12 100644
--- a/src/filebuf.h
+++ b/src/filebuf.h
@@ -25,8 +25,8 @@
 #define GIT_FILEBUF_FSYNC				(1 << 6)
 #define GIT_FILEBUF_DEFLATE_SHIFT		(7)
 
-#define GIT_FILELOCK_EXTENSION ".lock\0"
-#define GIT_FILELOCK_EXTLENGTH 6
+#define GIT_FILELOCK_EXTENSION ".git-lock~\0"
+#define GIT_FILELOCK_EXTLENGTH 11
 
 typedef struct git_filebuf git_filebuf;
 struct git_filebuf {
diff --git a/src/repository.c b/src/repository.c
index 9b3e9c9e3..edabd7f47 100644
--- a/src/repository.c
+++ b/src/repository.c
@@ -1485,10 +1485,10 @@ done:
 
 static int check_extensions(git_config *config, int version)
 {
-	if (version < 1)
+	// if (version < 1)
 		return 0;
 
-	return git_config_foreach_match(config, "^extensions\\.", check_valid_extension, NULL);
+	// return git_config_foreach_match(config, "^extensions\\.", check_valid_extension, NULL);
 }
 
 int git_repository__extensions(char ***out, size_t *out_len)
